// script.js - Firebase + Player Logic

const firebaseConfig = { apiKey: "AIzaSyA...", // Replace with your actual config authDomain: "uvi-web-app-8ec1e.firebaseapp.com", databaseURL: "https://uvi-web-app-8ec1e-default-rtdb.firebaseio.com", projectId: "uvi-web-app-8ec1e", storageBucket: "uvi-web-app-8ec1e.appspot.com", messagingSenderId: "...", appId: "..." };

firebase.initializeApp(firebaseConfig); const db = firebase.database(); const songContainer = document.getElementById('songs'); const searchInput = document.getElementById('search');

let allSongs = [];

function createSongCard(song, index) { const card = document.createElement('div'); card.className = 'song'; card.innerHTML = <img src="${song.thumbnail}" /> <div class="song-title">${song.title}</div>; card.onclick = () => openPlayer(index); return card; }

function renderSongs(songs) { songContainer.innerHTML = ''; songs.forEach((song, i) => { songContainer.appendChild(createSongCard(song, i)); }); }

// Load Songs from Firebase db.ref("songs").on("value", (snapshot) => { allSongs = Object.values(snapshot.val() || {}); renderSongs(allSongs); });

// Search Logic searchInput.addEventListener("input", (e) => { const q = e.target.value.toLowerCase(); const filtered = allSongs.filter((s) => s.title.toLowerCase().includes(q)); renderSongs(filtered); });

// Player Logic const audio = document.getElementById("audio"); const miniPlayer = document.getElementById("miniPlayer"); const fullPlayer = document.getElementById("fullPlayer"); let currentIndex = 0;

function openPlayer(index) { const song = allSongs[index]; currentIndex = index; audio.src = song.audio_url; document.getElementById("miniTitle").innerText = song.title; document.getElementById("miniThumb").src = song.thumbnail; document.getElementById("fullTitle").innerText = song.title; document.getElementById("fullThumb").src = song.thumbnail;

miniPlayer.classList.remove("hidden"); fullPlayer.classList.remove("hidden"); audio.play(); }

document.getElementById("playPauseBtn").onclick = () => { if (audio.paused) audio.play(); else audio.pause(); };

document.getElementById("nextBtn").onclick = () => { if (currentIndex < allSongs.length - 1) openPlayer(currentIndex + 1); };

document.getElementById("prevBtn").onclick = () => { if (currentIndex > 0) openPlayer(currentIndex - 1); };

document.getElementById("backBtn").onclick = () => { fullPlayer.classList.add("hidden"); };

  
